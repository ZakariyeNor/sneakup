{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="py-5 bg-light" style="margin: 0 110px;">
    <div class="containe" style="padding: 0 100px;">
        <div class="row">
            <div class="col-12">
                <h3 class="mb-0">
                    Shopping bag
                </h3>

                {% if bag_items %}
                    <p class="text-muted mb-0">
                        Items in your bag are not reserved - check out now to make them yours.
                    </p>
                {% else %}
                    <p class="text-muted mb-0">
                        Your bag is empty.
                    </p>
                {% endif %}
                <hr class="mt-1" style="border: none; height: 3px; background-color: #6d8b84; opacity: 0.5;">
            </div>

            {% if bag_items %}
                <div class="col-12 mt-2">
                    <p class="mb-0">If you spend â‚¬5 more, you'll get free delivery.</p>
                    <p class="">Join DUAC today and get fast, free shipping when your order reaches the qualifying amount.
                        <a href="{% url 'account_signup' %}" class="text-muted text-capitalize">
                            <span style="text-decoration: underline; text-underline-offset: 4.5px;">Sign up</span>
                        </a> or 
                        <a href="{% url 'account_login' %}" class="text-muted text-capitalize">
                            <span style="text-decoration: underline; text-underline-offset: 4.5px;">Log in</span>
                        </a>
                        to start saving.
                    </p>
                </div>
            {% endif %}
        </div>
        <div class="row">
            <div class="col-12">
                {% if bag_items %}
                        <h6 class="mb-2 mt-2">Items</h6>
                    {% for item in bag_items %}
                        <!-- Product image -->
                        <div class="row align-items-center">
                        <!-- Image, takes 2 columns -->
                        <div class="col-2">
                            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="img-fluid rounded">
                        </div>

                        <!-- Product name, takes 7 columns -->
                        <div class="col-7">
                            <p class="mb-0 fw-bold fs-6">{{ item.product.name }}</p>
                            <p class="mb-0 text-muted">Quantity: {{ item.quantity }}</p>
                            {% if item.selected_size %}
                                <p class="mb-0 text-muted">Size: {{ item.selected_size }}</p>
                            {% elif item.product.free_size %}
                                <p class="mb-0 text-muted">Size: <span class="tooltip-text">Free Size</span></p>
                            {% else %}
                                <p class="mb-0">Size: Not Specified</p>
                            {% endif %}
                        </div>
                        <!-- Price, takes 3 columns -->
                        <div class="col-3 text-end">
                            <p class="mb-0">${{ item.product.price }}</p>
                        </div>
                        </div>
                    {% endfor %}

                {% else %}
                    <p class="mb-4">
                        You have no products in your shopping bag.
                    </p>
                    <!-- Back to shop -->
                    <a href="{% url 'products' %}" class="btn d-block left-0 mb-2"
                        style="width: 200px; border-radius: 20px; background-color: #bdae78b6;">
                        <i class="fa-solid fa-angle-left" style="color: #6d8b84;"></i> Keep Shopping
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<

{% endblock %}